{"title":"Vue组件打包到发布流程","uid":"e0b5cfb0ffceb545d85968bbf214a8c9","slug":"npm-build","date":"2021-04-24T15:47:20.000Z","updated":"2023-09-18T08:38:32.904Z","comments":true,"path":"api/articles/npm-build.json","keywords":null,"cover":"https://schbrain-static-online.schbrain.com/resources/dffa8e69647da5cbb3e4fa4d4fdbc15a.jpg","content":"<h2 id=\"一-npm是什么\"><a href=\"#一-npm是什么\" class=\"headerlink\" title=\"一. npm是什么\"></a>一. npm是什么</h2><p>   npm（全称 Node Package Manager，即“node包管理器”）是Node.js默认的、用JavaScript编写的软件包管理系统。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"二-npm发展史\"><a href=\"#二-npm发展史\" class=\"headerlink\" title=\"二.npm发展史\"></a>二.npm发展史</h2><p>   npm 的发展是跟 Node.js 的发展相辅相成的,NodeJs是由在德国工作的美国程序员 瑞安.达尔(Ryan Dahl) 的，他写了 Node.js，但是 Node.js 缺少一个包管理器，于是他和 npm 的作者一拍即合、抱团取暖，最终 Node.js 内置了 npm<br>   npm完全用JavaScript写成，最初由艾萨克·施吕特（Isaac Z. Schlueter）开发。艾萨克表示自己意识到“模块管理很糟糕”的问题，并看到了PHP的PEAR与Perl的CPAN等软件的缺点，于是编写了npm。<br>2020年3月16 日，GitHub CEO 奈特·弗里德曼 (Nat Friedman) 宣布 GitHub 已签署收购 NPM（npm 背后的公司）的协议，并表示 npm 加入 GitHub 后会继续免费提供公共软件注册中心服务。</p>\n<h2 id=\"三-组件开发\"><a href=\"#三-组件开发\" class=\"headerlink\" title=\"三.组件开发\"></a>三.组件开发</h2><p> 1.使用vue-cli构建一个项目</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue create xianyuNpm</span><br></pre></td></tr></table></figure>\n\n<p> 2.新建文件夹packages用于存放组件（vue开发组件可以放在这里里面）<br><img src=\"/assets/article/image.png\" alt=\"image.png\"></p>\n<p>countNumber.vue测试代码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div class=&quot;count-number&quot; :style=&quot;&#123;color: color, fontSize: size + &#x27;px&#x27;&#125;&quot;&gt;</span><br><span class=\"line\">    &lt;slot/&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &#x27;countNumber&#x27;,</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    color: &#123;</span><br><span class=\"line\">      type: String,</span><br><span class=\"line\">      default: &#x27;red&#x27;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    size: &#123;</span><br><span class=\"line\">      type: String,</span><br><span class=\"line\">      default: &#x27;12&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>countNumber同级index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">CountNumber</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./countNumber&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// 存储组件列表</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> components = [</span><br><span class=\"line\">    <span class=\"title class_\">CountNumber</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  定义install 方法，接收Vue作为参数，如果使用use注册插件，则所有的组件都将被注册</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> install = <span class=\"keyword\">function</span> (<span class=\"params\">Vue</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 判断是否安装</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(install.<span class=\"property\">installed</span>)&#123;<span class=\"keyword\">return</span>&#125;</span><br><span class=\"line\">    <span class=\"comment\">// 遍历所有组件</span></span><br><span class=\"line\">    components.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(item.<span class=\"property\">name</span>,item)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 判断是否引入文件</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"variable language_\">window</span> !== <span class=\"string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">Vue</span>)&#123;</span><br><span class=\"line\">    <span class=\"title function_\">install</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">Vue</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>&#123;</span><br><span class=\"line\">    install,</span><br><span class=\"line\">    <span class=\"title class_\">CountNumber</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>packages下的index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">CountNumber</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./countNumber&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// 存储组件列表</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> components = [</span><br><span class=\"line\">    <span class=\"title class_\">CountNumber</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  定义install 方法，接收Vue作为参数，如果使用use注册插件，则所有的组件都将被注册</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> install = <span class=\"keyword\">function</span> (<span class=\"params\">Vue</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 判断是否安装</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(install.<span class=\"property\">installed</span>)&#123;<span class=\"keyword\">return</span>&#125;</span><br><span class=\"line\">    <span class=\"comment\">// 遍历所有组件</span></span><br><span class=\"line\">    components.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(item.<span class=\"property\">name</span>,item)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 判断是否引入文件</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"variable language_\">window</span> !== <span class=\"string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">Vue</span>)&#123;</span><br><span class=\"line\">    <span class=\"title function_\">install</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">Vue</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>&#123;</span><br><span class=\"line\">    install,</span><br><span class=\"line\">    <span class=\"title class_\">CountNumber</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3.新建vue.config.js文件（项目打包配置）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">port</span>: <span class=\"number\">4000</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 修改 examples 目录 为 examples 目录</span></span><br><span class=\"line\">    <span class=\"attr\">pages</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">index</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// page 的入口</span></span><br><span class=\"line\">            <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;examples/main.js&#x27;</span>,   <span class=\"comment\">// 把src 修改为examples</span></span><br><span class=\"line\">            <span class=\"comment\">// 模板来源</span></span><br><span class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">&#x27;public/index.html&#x27;</span>,</span><br><span class=\"line\">            <span class=\"comment\">// 在 dist/index.html 的输出</span></span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;index.html&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 扩展 webpack 配置，使 packages 加入编译</span></span><br><span class=\"line\">    <span class=\"comment\">/* chainWebpack 是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。允许对内部的 webpack 配置进行更细粒度的修改。 */</span></span><br><span class=\"line\">    <span class=\"attr\">chainWebpack</span>: <span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\">        config.<span class=\"property\">module</span></span><br><span class=\"line\">            .<span class=\"title function_\">rule</span>(<span class=\"string\">&#x27;js&#x27;</span>)</span><br><span class=\"line\">            .<span class=\"property\">include</span></span><br><span class=\"line\">            .<span class=\"title function_\">add</span>(__dirname + <span class=\"string\">&#x27;packages&#x27;</span>)  <span class=\"comment\">// 注意这里需要绝对路径，所有要拼接__dirname</span></span><br><span class=\"line\">            .<span class=\"title function_\">end</span>()</span><br><span class=\"line\">            .<span class=\"title function_\">use</span>(<span class=\"string\">&#x27;babel&#x27;</span>)</span><br><span class=\"line\">            .<span class=\"title function_\">loader</span>(<span class=\"string\">&#x27;babel-loader&#x27;</span>)</span><br><span class=\"line\">            .<span class=\"title function_\">tap</span>(<span class=\"function\"><span class=\"params\">options</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 修改它的选项...</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> options</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> 4.配置打包文件（package.json）</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">   <span class=\"comment\">// 包名，该名字是唯一的。可在 npm 官网搜索名字，如果存在则需换个名字。</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;woshiyitiaoxianyu-npm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 版本号，每次发布至 npm 需要修改版本号，不能和历史版本号相同。</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1.0.3&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 是否私有，需要修改为 false 才能发布到 npm</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;private&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 项目描述</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;description:&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;我是一条咸鱼&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 作者</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xianyuya &lt;s22529634@aliyun.com&gt;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;MIT&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">// 开源协议</span></span><br><span class=\"line\">  <span class=\"comment\">// 项目官网的地址</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;homepage&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;http:// blob/xianyuya.ltd/&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 入口文件，该字段需指向我们最终编译后的包文件</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;lib/woshiyitiaoxianyu-npm.umd.min.js&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">  <span class=\"comment\">// 关键字，以空格分离希望用户最终搜索的词或者数组形式</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;keywords&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;vue&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;countNumber&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 项目仓库</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;repository&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;git&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;url&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;https://github.com/s-xianyu/xianyuNpm.git&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"comment\">// 指定打包后,包中存在的文件夹</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;files&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;lib&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;packages&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;examples&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">// --target 构建目标，默认为应用模式。这里修改为 lib 启用库模式</span></span><br><span class=\"line\">    <span class=\"comment\">// --name 打包生成的包名</span></span><br><span class=\"line\">    <span class=\"comment\">// --dest 输出目录，默认 dist。这里我们改成 lib</span></span><br><span class=\"line\">    <span class=\"comment\">// [entry] 最后一个参数为入口文件，默认为 src/App.vue。这里我们指定编译 packages/ 组件库目录</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;lib&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vue-cli-service build --target lib --name woshiyitiaoxianyu-npm --dest lib packages/index.js&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;serve&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vue-cli-service serve&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;build&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vue-cli-service build&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;lint&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vue-cli-service lint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;publish&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;publish&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"四-发布\"><a href=\"#四-发布\" class=\"headerlink\" title=\"四. 发布\"></a>四. 发布</h2><p> 到<a href=\"https://www.npmjs.com/\">npm官网</a> 注册账号然后到项目中登录</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 登录</span></span><br><span class=\"line\">npm login</span><br><span class=\"line\"><span class=\"comment\">// 发布</span></span><br><span class=\"line\">npm publish</span><br><span class=\"line\"><span class=\"comment\">// 从注册表中删除软件包</span></span><br><span class=\"line\">npm unpublish [&lt;@scope&gt;/]&lt;pkg&gt;[@&lt;version&gt;]</span><br><span class=\"line\">npx force-unpublish package-name <span class=\"string\">&#x27;原因描述&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// 查看当前登录账户</span></span><br><span class=\"line\"> npm whoami</span><br><span class=\"line\">      </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> 发布过程中首先要切换镜像</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">查看npm源地址，在终端输入以下命令</span><br><span class=\"line\">npm config list</span><br><span class=\"line\">修改registry地址</span><br><span class=\"line\">npm config set registry <span class=\"attr\">http</span>:<span class=\"comment\">//registry.npmjs.org  // 官网镜像地址</span></span><br><span class=\"line\">npm set registry <span class=\"attr\">https</span>:<span class=\"comment\">//registry.npm.taobao.org/ // 淘宝镜像地址</span></span><br><span class=\"line\"><span class=\"comment\">// 或者直接装nrm mac前面加sudo</span></span><br><span class=\"line\">npm install nrm -g --save</span><br><span class=\"line\"><span class=\"comment\">// 查看所有源</span></span><br><span class=\"line\">nrm ls</span><br><span class=\"line\"><span class=\"comment\">//查看当前源</span></span><br><span class=\"line\">nrm current</span><br><span class=\"line\"><span class=\"comment\">// 切换</span></span><br><span class=\"line\">nrm use cnpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用nrm add 命令添加公司私有npm源</span></span><br><span class=\"line\">nrm add qihoo <span class=\"attr\">http</span>:<span class=\"comment\">//registry.npm.xianyu.org</span></span><br><span class=\"line\"><span class=\"comment\">// 测试速度</span></span><br><span class=\"line\">nrm test npm</span><br><span class=\"line\"><span class=\"comment\">// 删除镜像源</span></span><br><span class=\"line\">nrm del npm</span><br></pre></td></tr></table></figure>\n<p><img src=\"/assets/article/image1.png\" alt=\"image.png\"></p>\n<p><img src=\"/assets/article/image2.png\" alt=\"image.png\"></p>\n","feature":true,"text":"一. npm是什么 npm（全称 Node Package Manager，即“node包管理器”）是Node.js默认的、用JavaScript编写的软件包管...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"node","slug":"node","count":2,"path":"api/tags/node.json"},{"name":"javascript","slug":"javascript","count":1,"path":"api/tags/javascript.json"},{"name":"npm","slug":"npm","count":1,"path":"api/tags/npm.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80-npm%E6%98%AF%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">一. npm是什么</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C-npm%E5%8F%91%E5%B1%95%E5%8F%B2\"><span class=\"toc-text\">二.npm发展史</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89-%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">三.组件开发</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B-%E5%8F%91%E5%B8%83\"><span class=\"toc-text\">四. 发布</span></a></li></ol>","author":{"name":"咸鱼呀","slug":"blog-author","avatar":"/assets/user/avatar.jpg","link":"/","description":"前端小白","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"nvm-upgrade","uid":"fed10f41658f89f01b935a14285ff6c9","slug":"nvm-upgrade","date":"2021-10-11T09:40:24.000Z","updated":"2023-09-18T08:38:32.904Z","comments":true,"path":"api/articles/nvm-upgrade.json","keywords":null,"cover":"https://schbrain-static-online.schbrain.com/resources/dffa8e69647da5cbb3e4fa4d4fdbc15a.jpg","text":"##NVM升级 使用nvm 时报错如下nvm is already installed in &#x2F;usr&#x2F;xxx&#x2F;.nvm, try...","link":"","photos":[],"count_time":{"symbolsCount":439,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"前端","slug":"前端","count":10,"path":"api/tags/前端.json"},{"name":"nodeJs","slug":"nodeJs","count":2,"path":"api/tags/nodeJs.json"}],"author":{"name":"咸鱼呀","slug":"blog-author","avatar":"/assets/user/avatar.jpg","link":"/","description":"前端小白","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"vue 3.0 生命周期函数记录","uid":"3006b0f426e269e4b19a1db0dcd311b9","slug":"vue3-record","date":"2021-06-27T02:03:26.000Z","updated":"2023-09-18T08:38:32.904Z","comments":true,"path":"api/articles/vue3-record.json","keywords":null,"cover":null,"text":"记录3.0常用方法及属性 简单两个页面， 主要是查看生命周期 1234567891011121314151617181920212223242526272829...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"前端","slug":"前端","count":10,"path":"api/tags/前端.json"},{"name":"vue 3.0","slug":"vue-3-0","count":1,"path":"api/tags/vue-3-0.json"}],"author":{"name":"咸鱼呀","slug":"blog-author","avatar":"/assets/user/avatar.jpg","link":"/","description":"前端小白","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}